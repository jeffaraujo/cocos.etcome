{"persistifyArgs":{"cache":{"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\f4\\f4f96f57-2716-4736-90a8-6740480c2a0f.js":{"source":"\"use strict\";\ncc._RF.push(module, 'f4f969XJxZHNpCoZ0BIDCoP', 'Candy');\n// Script/Candy.js\n\n'use strict';\n\ncc.Class({\n    extends: cc.Component,\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.node.on('touchend', function () {\n            this.node.dispatchEvent(new cc.Event.EventCustom('candy_die', true));\n            this.node.removeFromParent();\n        }, this);\n    }\n\n});\n\ncc._RF.pop();","deps":{}},"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\75\\757af3a9-9c5c-4263-9217-6abdac26efaf.js":{"source":"\"use strict\";\ncc._RF.push(module, '757afOpnFxCY5IXar2sJu+v', 'btn_Iniciar');\n// Script/btn_Iniciar.js\n\n'use strict';\n\ncc.Class({\n    extends: cc.Component,\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        cc.director.preloadScene('Game');\n\n        this.node.on('touchend', function () {\n            cc.audioEngine.stopAll();\n            cc.director.loadScene('Game');\n        });\n\n        var audioUrl = cc.url.raw(\"Audio/bg-sound.mp3\");\n        cc.audioEngine.playEffect(audioUrl, true, 0.1);\n    }\n\n});\n\ncc._RF.pop();","deps":{}},"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\71\\718ee151-4fdc-4cef-af94-d4642e6c1fa9.js":{"source":"\"use strict\";\ncc._RF.push(module, '718eeFRT9xM76+U1GQubB+p', 'Sound');\n// Script/Sound.js\n\n'use strict';\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        sound_on: {\n            default: null,\n            type: cc.Sprite\n        },\n        sound_off: {\n            default: null,\n            type: cc.Sprite\n        }\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.soundOn();\n        this.soundOff();\n    },\n\n    soundOn: function soundOn() {\n        var self = this.sound_on;\n        this.sound_on.node.on('touchend', function () {\n            self.node.setPositionX(1000);\n            cc.audioEngine.pauseAll();\n\n            self.node.parent.parent.getComponent('Game').audioControl = false;\n        });\n    },\n    soundOff: function soundOff() {\n        var self = this.sound_on;\n        this.sound_off.node.on('touchend', function () {\n            self.node.setPositionX(0);\n            cc.audioEngine.resumeAll();\n\n            self.node.parent.parent.getComponent('Game').audioControl = true;\n        });\n    }\n});\n\ncc._RF.pop();","deps":{}},"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\cf\\cf481129-f0b3-436d-999a-5aa665c4499f.js":{"source":"\"use strict\";\ncc._RF.push(module, 'cf481Ep8LNDbZmaWqZlxEmf', 'Game');\n// Script/Game.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        background: {\n            default: null,\n            type: cc.Node\n        },\n        btn_start: {\n            default: null,\n            type: cc.Node\n        },\n        gameoverLayer: {\n            default: null,\n            type: cc.Layout\n        },\n        scoreLabel: {\n            default: null,\n            type: cc.Label\n        },\n        lifeLabel: {\n            default: null,\n            type: cc.Label\n        },\n        pauseLabel: {\n            default: null,\n            type: cc.Label\n        },\n        candies: {\n            default: [],\n            type: cc.Prefab\n        },\n        candyLayer: {\n            default: null,\n            type: cc.Layout\n        },\n        eat_candyAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        splashAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n        tempomin: 0,\n        tempomax: 0,\n        score: 0,\n        maxLife: 0,\n        maxCandy: 0,\n        isLaunch: false,\n        audioControl: true\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        var candiesCount = 0;\n        var delta = 0;\n\n        var self = this;\n\n        self.scheduleOnce(function () {\n            this.candiesCount = 0;\n            self.initGame();\n        }, 1);\n\n        self.node.on('candy_die', function (event) {\n\n            self.addScore(1);\n            candiesCount--;\n            if (self.audioControl === true) {\n                cc.audioEngine.playEffect(self.eat_candyAudio, false);\n            }\n        }, self);\n\n        this.candyLayer.node.setContentSize(this.background.width, this.background.height);\n\n        this.btn_start.setPositionX(1000);\n    },\n\n    onPause: function onPause() {\n        if (cc.director.isPaused()) {\n            cc.director.resume();\n            this.pauseLabel.node.active = false;\n        } else {\n            cc.director.pause();\n            this.pauseLabel.node.active = true;\n        }\n    },\n\n    gameOver: function gameOver() {\n        if (this.life === 0) {\n            this.isLaunch = false;\n            this.gameoverLayer.node.active = true;\n\n            this.btn_start.setPositionX(0);\n\n            this.candyLayer.node.stopAllActions();\n            this.candyLayer.node.removeAllChildren();\n        } else {\n            if (this.audioControl === true) {\n                cc.audioEngine.playEffect(this.splashAudio, false);\n            }\n            this.life--;\n            this.lifeLabel.string = \"x\" + this.life;\n        }\n    },\n\n    initGame: function initGame() {\n        this.life = this.maxLife;\n\n        this.score = 0;\n        this.lifeLabel.string = \"x\" + this.life;\n\n        this.isLaunch = true;\n    },\n\n    spawCandy: function spawCandy(dt) {\n        //var delta; \n\n        if (this.isLaunch === false) {\n            return;\n        }\n\n        if (this.candiesCount > this.maxCandy) {\n            return;\n        }\n\n        this.delta += dt;\n        if (this.delta < 1) {\n            return;\n        }\n\n        this.delta = 0;\n\n        var candyLayer = this.candyLayer.node;\n\n        var winsize = candyLayer.getContentSize();\n\n        var candiesAmount = this.candies.length - 1;\n\n        //var candy = cc.instantiate(this.candies[0]);\n        var candy = cc.instantiate(this.candies[Math.ceil(candiesAmount * cc.random0To1())]);\n\n        candy.setPosition(this.newCandyPosition());\n\n        var tempo = cc.random0To1() * this.tempomax + this.tempomin;\n\n        var self = this;\n\n        var moveby = cc.moveBy(tempo, 0, -winsize.height - 30);\n\n        var sequence = cc.sequence(moveby, cc.removeSelf(true), cc.callFunc(function () {\n            self._candiesCount--;\n        }, self), cc.callFunc(function () {\n            self.gameOver();\n        }, self));\n\n        candy.runAction(sequence);\n\n        candyLayer.addChild(candy);\n\n        this.candiesCount++;\n    },\n\n    newCandyPosition: function newCandyPosition() {\n        var winsize = this.candyLayer.node.getContentSize();\n\n        var x = winsize.width * cc.random0To1();\n\n        var y = winsize.height - 100;\n\n        return cc.p(x, y);\n    },\n\n    addScore: function addScore(newScore) {\n        this.score += newScore;\n\n        this.scoreLabel.string = this.score.toString();\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        this.spawCandy(dt);\n    }\n});\n\ncc._RF.pop();","deps":{}}},"packageCache":{"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\Script\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\package.json":false,"C:\\Users\\jeffa\\Documents\\package.json":false,"C:\\Users\\jeffa\\package.json":false,"C:\\Users\\package.json":false,"C:\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\Script\\btn_Iniciar.js":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\75\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\75\\757af3a9-9c5c-4263-9217-6abdac26efaf.js":{"__dirname":"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\75"},"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\Script\\NewScript.js":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\cf\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\cf\\cf481129-f0b3-436d-999a-5aa665c4499f.js":{"__dirname":"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\cf"},"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\Script\\Game.js":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\f4\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\f4\\f4f96f57-2716-4736-90a8-6740480c2a0f.js":{"__dirname":"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\f4"},"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\Script\\Candy.js":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\71\\package.json":false,"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\71\\718ee151-4fdc-4cef-af94-d4642e6c1fa9.js":{"__dirname":"C:\\Users\\jeffa\\Documents\\ETCandy\\library\\imports\\71"},"C:\\Users\\jeffa\\Documents\\ETCandy\\assets\\Script\\Sound.js":false}}}